{% extends '_layouts/standard.html.twig' %}

{% block title %}Connexion | Y{% endblock %}

{% block content %}
    <section class="home-card">
        <h1 class="home-title">Connexion</h1>
        <p class="home-tagline">Heureux de vous revoir sur Y.</p>

        <form method="post" class="y-form">
            {% if error %}
                <div class="alert alert-danger">
                    <span class="alert-icon">⚠️</span>
                    <span class="alert-text">
                        {{ error.messageKey|trans(error.messageData, 'security') }}
                    </span>
                </div>
            {% endif %}

            {% if app.user %}
                <div class="user-status">
                    Vous êtes connecté en tant que <strong>{{ app.user.userIdentifier }}</strong>,
                    <a href="{{ logout_path() }}">Se déconnecter</a>
                </div>
            {% endif %}

            <div class="form-group">
                <label for="username" class="visually-hidden">Email</label>
                <input type="email"
                       value="{{ last_username }}"
                       name="_username"
                       id="username"
                       class="form-control"
                       placeholder="Email"
                       autocomplete="email"
                       required
                       autofocus>
            </div>

            <div class="form-group">
                <label for="password" class="visually-hidden">Mot de passe</label>
                <input type="password"
                       name="_password"
                       id="password"
                       class="form-control"
                       placeholder="Mot de passe"
                       autocomplete="current-password"
                       required>
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

            <div class="home-actions">
                <button class="btn btn-solid" type="submit">
                    Se connecter
                </button>
            </div>

            <div class="form-footer">
                <a href="{{ path('register') }}" class="link-muted">
                    Pas encore de compte ? Rejoignez le chaos
                </a>
            </div>
        </form>
    </section>
{% endblock %}
